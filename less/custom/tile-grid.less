/*!
 * CuyahogaRecycles.org theme
 */

//
// Load core variables and mixins
// --------------------------------------------------

@import "variables.less";
@import "mixins.less";


//
// Tile grid generator
// --------------------------------------------------

.generate-grid(@cols) {

  @subunits: 2;
  @subcols: (@cols * @subunits);
  @subrows: 4;

  .generate-cell(@x, @y, @w, @h) {
    &.grid-cell-@{w}-@{h} {
      width: (@w / @x * 100%);
      padding-bottom: (@subunits * @h / @y * 100% / @subcols);
    }
  }

  .generate-cells(@x, @y) {
    .generate-cols();
    .generate-cols(@i: 1) when (@i =< @x) {
      .generate-rows();
      .generate-rows(@j: 1) when (@j =< @y) {
        .generate-cell(@x, @y, @i, @j);
        .generate-rows((@j + 1));
      }
      .generate-cols((@i + 1));
    }
    .generate-cols();
  }

  .generate-cells(@subcols, @subrows);

}

.generate-placeholders(@cols) {

  .generate-placeholder-loop(@i: 2) when (@i < @cols) {
    // Hide placeholders made for smaller grids
    &.grid-cell-placeholder.grid-cell-placeholder-@{i}:nth-child(n) {
      display: none;
    }
    &.grid-cell-placeholder.grid-cell-placeholder-@{cols}.grid-cell-placeholder-pos-@{i}:nth-child(@{cols}n+@{i}) {
      display: block;
    }
    .generate-placeholder-loop((@i + 1));
  }

  .generate-placeholder-loop();

  &.grid-cell-placeholder.grid-cell-placeholder-@{cols}.grid-cell-placeholder-pos-@{cols}:nth-child(@{cols}n) {
    display: block;
  }

}


//
// Tile grid
// --------------------------------------------------

.tile-grid {
  // HACK: Hides 1px rounding errors on percent width grid cells
  // width: 100.12%;
  margin: 0;
  padding: 0;
  list-style: none;

  .clearfix;

  > .grid-cell {
    width: 100%;
    display: block;
    float: left;
    position: relative;
    margin: 0;
    padding: 0;
    padding-bottom: 50%;
    overflow: hidden;
    color: inherit;

    &:nth-child(4n)   { background-color: @ccswd-dark;    }
    &:nth-child(4n+1) { background-color: @ccswd-blue;    }
    &:nth-child(4n+2) { background-color: @ccswd-green-1; }
    &:nth-child(4n+3) { background-color: @ccswd-yellow;  }

    &.grid-cell-full-width {
      width: 100% !important;
    }

    &.grid-cell-placeholder {
      display: none;
    }

    // 1 column grid
    .generate-grid(1);

    @media screen and (min-width: 800px) and (max-width: 1199px) {
      // 2 column grid
      .generate-grid(2);
      .generate-placeholders(2)
    }

    @media screen and (min-width: 1200px) {
      // 3 column grid
      .generate-grid(3);
      .generate-placeholders(3)
    }

    @media screen and (min-width: 1600px) {
      // 4 column grid
      // .generate-grid(4);
    }

    > .grid-cell-container {
      width: 100%;
      height: 100%;
      display: block;
      position: absolute;
    }
  }
}


//
// Grid cell container inner
// --------------------------------------------------

.grid-cell-container-inner {
  width: 100%;
  height: 100%;
  display: block;
  margin: 0;
  padding: 0;

  > .grid-cell-content-outer {
    width: 100%;
    height: 100%;
    display: table;
    padding: (@grid-gutter-width * 3 / 8) (@grid-gutter-width * 1 / 2);

    > .grid-cell-content-inner {
      width: 100%;
      height: 100%;
      display: table-cell;
      vertical-align: bottom;
    }
  }

  &.grid-cell-link-title {
    position: relative;
    z-index: 1;
    font-weight: bold;
    font-size: 24px;
    letter-spacing: @letter-spacing;
    text-transform: uppercase;

    > .grid-cell-content-outer {
      > .grid-cell-content-inner {
        vertical-align: bottom;
      }
    }
  }

  &.grid-cell-link-caption {
    position: relative;
    z-index: 1;

    > .grid-cell-content-outer {
      padding: 0 (@grid-gutter-width * 1 / 2);

      > .grid-cell-content-inner {
        vertical-align: baseline;
      }
    }
  }

  &.grid-cell-link-event {
    position: relative;
    z-index: 1;

    > .grid-cell-content-outer {
      > .grid-cell-content-inner {
        vertical-align: bottom;
      }
    }

    h2 {
      margin-top: (@font-size-base / 2);
      font-size: (@font-size-base * 2.5);
    }

    h4 {
      margin: 0;
      font-size: (@font-size-base * 1.5);
    }
  }

  &.grid-cell-link-bg {
    position: absolute;
    top: 0;
    left: 0;

    > img {
      width: 100%;
      height: 100%;
      display: block;
      margin: 0;
      padding: 0;
    }

    &.grid-cell-link-event-bg {
      > img {
        width: auto;
        margin: 0 auto;
      }
    }
  }

  &.grid-cell-info-box {
    font-size: (@font-size-base * 1.5);
    text-align: center;

    > .grid-cell-content-outer {
      > .grid-cell-content-inner {
        vertical-align: middle;
      }
    }

    h4 {
      font-size: (@font-size-base * 2.5);
      font-weight: bold;
      text-transform: uppercase;
    }
  }
}

.grid-cell-link {
  width: 100%;
  height: 100%;
  display: block;
  margin: 0;
  padding: 0;
  color: @white;
  text-decoration: none;

  &:hover,
  &:focus,
  &:active,
  &.active {
    color: @white;
    text-decoration: none;
  }

  &.grid-cell-link-reveal {

    .grid-cell-link-title {
      .transition(margin @link-transition-speed);
    }

    &:hover {
      .grid-cell-link-title {
        margin-top: -25%;
      }
    }

    &.grid-cell-link-staff:hover {
      .grid-cell-link-title {
        margin-top: -100%;
      }
    }
  }

  &.grid-cell-link-staff {
    > .grid-cell-link-caption {
      background: rgba(0,0,0,0.4);

      > .grid-cell-content-outer {
        padding: (@grid-gutter-width * 3 / 8) (@grid-gutter-width * 1 / 2);

        > .grid-cell-content-inner {
          vertical-align: baseline;
        }
      }
    }
  }
}

.grid-cell-video-player {
  padding: 0;

  > iframe {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
  }
}


//
// Image tile link
// --------------------------------------------------

.tile-img-zoom {
  img {
    width: 100%;
    height: 100%;
    display: block;
    margin: 0;
    padding: 0;

    .transition-transform(@link-transition-speed ease);
    .transform-origin(center center);
    .scale(1);
  }

  &:hover,
  &:focus,
  &:active,
  &.active {
    img {
      .scale(1.25);
    }
  }
}
